{% extends "lac/base.html" %}
{% load i18n %}
{% block content %}

<h2>{{ overview.heading }}</h2>

{% if overview.content_above %}
   <div>
    {{ overview.content_above | safe }}
   </div>
{% endif %}

{% if overview.add_url %}
<a href="{{ overview.add_url }}" role="button" class="primary">{% translate "Create" %}</a>
{% endif %}

{% if overview.message != "" %}
<br><br>
<p><strong>{{ overview.message | safe }}</strong></p>
{% endif %}
<hr>

<table>
    <thead>
        <tr>
        <th scope="col">
            <a href="{{ overview.first_t_heading_dict.sort_url }}" class="contrast">
                {{overview.first_t_heading_dict.heading}}
            </a>
            {% if overview.first_t_heading_dict.is_sorted %}
                {% if overview.first_t_heading_dict.sort_order == "asc" %}
                <span class="material-icons md-16">arrow_downward</span>
                {% else %}
                <span class="material-icons md-16">arrow_upward</span>
                {% endif %}
            {% endif %}
        </th>
        {% for heading_dict in overview.heading_dicts %}
        <th scope="col">
            <center>
                <a href="{{ heading_dict.sort_url }}" class="contrast">{{heading_dict.heading}}</a>
                {% if heading_dict.is_sorted %}
                    {% if heading_dict.sort_order == "asc" %}
                    <span class="material-icons md-16">arrow_downward</span>
                    {% else %}
                    <span class="material-icons md-16">arrow_upward</span>
                    {% endif %}
                {% endif %}
            </center>
        </th>

        {% endfor %}
        {% if overview.info_url_name %}
            <th scope="col"><center>{% translate "Information" %}</center></th>
        {% endif %}
        {% if overview.edit_url_name %}
            <th scope="col"><center>{% translate "Edit" %}</center></th>
        {% endif %}
        {% if overview.delete_url_name %}
            <th scope="col"><center>{% translate "Delete" %}</center></th>
        {% endif %}
      </tr>
    </thead>
    <tbody>
    {% for t_row in overview.table_content %}
        <tr>
            <td>{{t_row.first_field}}</td>
            {% for field in t_row.content %}
                    <td><center>{{field | safe}}</center></td>
            {% endfor %}
            {% if t_row.info_url %}
                <td>
                    <center>
                        <a href="{{t_row.info_url}}" title="{% translate "Information" %}" role="button" class="secondary outline"><span class="material-icons md-16">info</span></a>
                    </center>
                </td>
            {% endif %}
            {% if t_row.edit_url %}
                <td>
                    <center>
                        <a href="{{t_row.edit_url}}" title="Bearbeiten" role="button" class="secondary outline"><span class="material-icons md-16">edit</span></a>
                    </center>
                </td>
            {% endif %}
            {% if t_row.delete_url %}
                <td>
                <center>
                    <button class="secondary outline"
                        data-target="modal-{{t_row.delete_url}}"
                        onClick="toggleModal(event)"
                        style="width: 3.5rem; margin-bottom: 0;"
                        title="LÃ¶schen">
                        <span class="material-icons md-16">delete</span>
                    </button>
                </center>
                {% comment %} <a href="{{t_row.delete_url}}"  role="button" ></a></td> {% endcomment %}
            {% endif %}
        </tr>
        {% comment %} Confirmation for deletion {% endcomment %}
        <dialog id="modal-{{t_row.delete_url}}">
            <article>
                <a href="#close"
                aria-label="Close"
                class="close"
                data-target="modal-{{t_row.delete_url}}"
                onClick="toggleModal(event)">
                </a>
                <h3>{% translate "Confirmation" %}</h3>
                <p>
                {% translate "This action cannot be undone!" %}
                </p>
                <footer>
                <a href="#cancel"
                    role="button"
                    class="secondary"
                    data-target="modal-{{t_row.delete_url}}"
                    onClick="toggleModal(event)">
                    {% translate "Cancel" %}
                </a>
                <a href="{{t_row.delete_url}}" role="button" class="contrast">{% translate "DELETE" %}</a>
                </footer>
            </article>
        </dialog>

    {% endfor %}
    </tbody>
  </table>

  {% if overview.hint %}
      <center>{{ overview.hint | safe }}</center>
  {% endif %}
  
  {% if back_url %}
    <center>
        <div>
            <a href="{{back_url}}" role="button" class="secondary">{%translate "Back" %}</a>
        </div>
    </center>
{% endif %}

{% endblock %}